<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no" />
<title>AI Photo Hub – Versione Schema Chiaro</title>
<style>
body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;margin:0;padding:0;background:#000;color:#fff;height:100vh;display:flex;flex-direction:column}
.hidden{display:none!important}
button{width:100%;padding:18px;font-size:1.2rem;font-weight:800;border-radius:16px;border:2px solid #555;background:#222;color:#fff;margin-bottom:10px}
button:active{transform:scale(.98)}
.screen{position:fixed;inset:0;background:#000;padding:16px;overflow:auto}
#result-text{white-space:pre-wrap;background:#111;border:1px solid #444;padding:12px;border-radius:10px}
</style>
</head>
<body>

<div id="main" class="screen">
  <h1>AI PHOTO HUB</h1>
  <input type="file" id="cam" accept="image/*" capture="environment" class="hidden" onchange="onPhoto(this)">
  <button onclick="cam.click()">SCATTA FOTO</button>
</div>

<div id="context" class="screen hidden">
  <h2>Contesto</h2>
  <button onclick="setContext('selfie')">SELFIE</button>
  <button onclick="setContext('paesaggio')">PAESAGGIO</button>
  <button onclick="setContext('cibo')">CIBO</button>
  <button onclick="setContext('oggetto')">OGGETTO</button>
  <button onclick="setContext('testo')">TESTO</button>
  <button onclick="setContext('abbigliamento')">ABBIGLIAMENTO</button>
  <button onclick="setContext('altro')">ALTRO</button>
</div>

<div id="result" class="screen hidden">
  <h2>Prompt generato</h2>
  <div id="result-text"></div>
  <button onclick="copyPrompt()">COPIA PROMPT</button>
  <button onclick="reset()">RICOMINCIA</button>
</div>

<script>
let photo=null, ctx=null, prompt="";

function onPhoto(inp){photo=inp.files[0];show('context');hide('main');}
function setContext(c){ctx=c;prompt=buildPrompt(c);document.getElementById('result-text').innerText=prompt;show('result');hide('context');}
function show(id){document.getElementById(id).classList.remove('hidden');}
function hide(id){document.getElementById(id).classList.add('hidden');}
function reset(){photo=null;ctx=null;prompt="";show('main');hide('result');}
async function copyPrompt(){await navigator.clipboard.writeText(prompt);alert('Prompt copiato');}

function promptBase(){return `Sei un revisore severo di immagini.
Obiettivo: aiutare una persona non vedente a capire ESATTAMENTE cosa si vede, quali problemi concreti ci sono e come rifare la foto.

REGOLE:
- Breve ma comprensibile.
- Vietato essere vago.
- Ogni problema in formato:
  PROBLEMA → EFFETTO → SOLUZIONE (1 riga ciascuno)
- Se non sei sicuro: "NON È CHIARO".

SAFE ZONE 2024:
Instagram Story: top 270 / bottom 384 / L-R 80
TikTok: top 288 / bottom 480 / L-R 80`;}

function schema(){return `Schema risposta:
A) PUBBLICABILE SOCIAL: Sì / Quasi / No (1 frase)

Se Sì o Quasi:
B) TAGLI SOCIAL
C) PROBLEMI (formato obbligatorio)
D) ESTETICA (solo se rilevante)
E) AZIONI IMMEDIATE
F) NON È CHIARO

Se No:
SCRIVI SOLO E e F`;}

function contextPrompt(c){
const m={
selfie:`CONTESTO: SELFIE
- Quante persone: una / più persone / non chiaro
- Guardano in camera: sì / no / non chiaro
- Controlli obbligatori: testa o mento tagliati, occhi chiusi/ombra, distanza, decentramento
Usa SEMPRE formato PROBLEMA → EFFETTO → SOLUZIONE`,
paesaggio:`CONTESTO: PAESAGGIO
- Soggetto principale
- Orizzonte
- Elementi tagliati
Formato PROBLEMA → EFFETTO → SOLUZIONE`,
cibo:`CONTESTO: CIBO
- Piatto visibile
- Fuoco e ombre
Formato PROBLEMA → EFFETTO → SOLUZIONE`,
oggetto:`CONTESTO: OGGETTO
- Cos'è (se chiaro)
- Parti tagliate
Formato PROBLEMA → EFFETTO → SOLUZIONE`,
testo:`CONTESTO: TESTO
- Leggibilità prioritaria
- Se illeggibile: come rifare
Formato PROBLEMA → EFFETTO → SOLUZIONE`,
abbigliamento:`CONTESTO: ABBIGLIAMENTO
- Macchie, pieghe, tagli
Formato PROBLEMA → EFFETTO → SOLUZIONE`,
altro:`CONTESTO: ALTRO
- Prudenza
- Niente supposizioni
Formato PROBLEMA → EFFETTO → SOLUZIONE`
};
return m[c]||m.altro;}

function buildPrompt(c){return [promptBase(),schema(),contextPrompt(c)].join("\n\n");}
</script>
</body>
</html>
